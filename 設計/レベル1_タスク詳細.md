# レベル 1：プロンプトの保存 - タスク詳細

## 概要

ユーザーは良く使うプロンプトを保存・編集することができます。
保存したプロンプトは上から使用回数順に並べられており、スクロールして目的のプロンプトを探すことができます。

## TODO リスト

### 1. プロジェクト基盤の構築

- [ ] VS Code 拡張機能の基本プロジェクト構造を作成
- [ ] package.json の設定（拡張機能の基本情報、コマンド定義）
- [ ] TypeScript の設定とビルド環境の構築
- [ ] 基本的な activation event の定義

### 2. データ構造の設計

- [ ] プロンプトデータの型定義作成
  - [ ] プロンプト ID
  - [ ] プロンプトタイトル
  - [ ] プロンプト内容
  - [ ] 使用回数
  - [ ] 作成日時
  - [ ] 更新日時
- [ ] プロンプト一覧を管理するデータ構造の設計

### 3. データ永続化の実装

- [ ] VS Code Extension Storage API を使用したグローバルデータ保存機能
  - [ ] context.globalState を使用したプロンプトデータの保存
  - [ ] 全ワークスペース共通でアクセス可能なデータ管理
- [ ] プロンプトデータの読み込み機能
  - [ ] 拡張機能起動時のデータ読み込み処理
  - [ ] データが存在しない場合の初期化処理
- [ ] プロンプトデータの書き込み機能
  - [ ] プロンプト作成・編集・削除時のデータ保存
  - [ ] データ保存の非同期処理とエラーハンドリング
- [ ] データのバックアップとマイグレーション機能
  - [ ] 設定データのエクスポート機能（将来的な拡張のため）
  - [ ] データ形式のバージョン管理

### 4. UI/UX の実装

- [ ] メイン Webview パネルの作成と基本レイアウト
  - [ ] 3 列レイアウトの実装（検索・詳細・変数設定）
  - [ ] レスポンシブデザインの実装
- [ ] 左側：プロンプト検索・一覧エリア
  - [ ] 検索ボックスの実装
  - [ ] プロンプト候補一覧の表示
  - [ ] プロンプト項目のスタイリング（青いボックス形式）
  - [ ] 使用回数順での並び替え表示
  - [ ] スクロール機能の実装
- [ ] 中央：プロンプト詳細表示エリア
  - [ ] 選択されたプロンプトの内容表示
  - [ ] 変数部分のハイライト機能
  - [ ] プロンプトプレビュー機能
- [ ] 右側：変数設定エリア（レベル 5 の準備）
  - [ ] 変数名の表示
  - [ ] 変数入力フィールドの実装
  - [ ] デフォルト値の表示機能
  - [ ] 実行ボタンの実装
- [ ] プロンプト管理機能の UI
  - [ ] 新しいプロンプト追加ボタン
  - [ ] プロンプト編集ダイアログ
  - [ ] プロンプト削除機能
- [ ] インタラクション機能
  - [ ] プロンプト選択時の詳細表示切り替え
  - [ ] 検索結果のリアルタイム更新
  - [ ] キーボードナビゲーション対応

### 5. プロンプト管理機能

- [ ] 新規プロンプト作成機能
- [ ] プロンプト編集機能（タイトル、内容の変更）
- [ ] プロンプト削除機能
- [ ] 使用回数カウント機能
- [ ] 使用回数順での並び替え機能

### 6. バリデーションとエラーハンドリング

- [ ] プロンプトタイトルの重複チェック
- [ ] 空のプロンプト入力に対するバリデーション
- [ ] データ保存失敗時のエラーハンドリング
- [ ] 不正なデータ形式に対するエラーハンドリング

### 7. ユーザビリティの向上

- [ ] プロンプト一覧の検索機能（レベル 2 の準備）
- [ ] プロンプトのプレビュー機能
- [ ] キーボードショートカットの実装
- [ ] 操作結果の通知表示

### 8. テストとデバッグ

- [ ] 基本機能のテストケース作成
- [ ] データ永続化のテスト
- [ ] UI 操作のテスト
- [ ] エラーケースのテスト

### 9. ドキュメントとパッケージング

- [ ] README.md の作成
- [ ] 拡張機能の説明とスクリーンショット
- [ ] バージョン管理とリリース準備
- [ ] VS Code Marketplace への公開準備

## 完了条件

- ユーザーがプロンプトを保存できる
- 保存したプロンプトを編集できる
- プロンプト一覧が使用回数順に表示される
- プロンプトをスクロールして探すことができる
- データが永続化される
