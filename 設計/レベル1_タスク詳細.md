# レベル 1：プロンプトの保存 - タスク詳細

## 概要

ユーザーは良く使うプロンプトを保存・編集することができます。
保存したプロンプトは上から使用回数順に並べられており、スクロールして目的のプロンプトを探すことができます。

## TODO リスト

### 1. プロジェクト基盤の構築

- [x] VS Code 拡張機能の基本プロジェクト構造を作成
- [x] package.json の設定（拡張機能の基本情報、コマンド定義）
- [x] TypeScript の設定とビルド環境の構築
- [x] 基本的な activation event の定義

### 2. データ構造の設計

- [x] プロンプトデータの型定義作成
  - [x] プロンプト ID
  - [x] プロンプトタイトル
  - [x] プロンプト内容
  - [x] 使用回数
  - [x] 作成日時
  - [x] 更新日時
- [x] プロンプト一覧を管理するデータ構造の設計

### 3. データ永続化の実装

- [x] VS Code Extension Storage API を使用したグローバルデータ保存機能
  - [x] context.globalState を使用したプロンプトデータの保存
  - [x] 全ワークスペース共通でアクセス可能なデータ管理
- [x] プロンプトデータの読み込み機能
  - [x] 拡張機能起動時のデータ読み込み処理
  - [x] データが存在しない場合の初期化処理
- [x] プロンプトデータの書き込み機能
  - [x] プロンプト作成・編集・削除時のデータ保存
  - [x] データ保存の非同期処理とエラーハンドリング
- [x] データのバックアップとマイグレーション機能
  - [x] 設定データのエクスポート機能（将来的な拡張のため）
  - [x] データ形式のバージョン管理

### 4. UI/UX の実装

- [x] メイン Webview パネルの作成と基本レイアウト
  - [x] 3 列レイアウトの実装（検索・詳細・変数設定）
  - [x] レスポンシブデザインの実装
- [x] 左側：プロンプト検索・一覧エリア
  - [x] 検索ボックスの実装
  - [x] プロンプト候補一覧の表示
  - [x] プロンプト項目のスタイリング（青いボックス形式）
  - [x] 使用回数順での並び替え表示
  - [x] スクロール機能の実装
- [x] 中央：プロンプト詳細表示エリア
  - [x] 選択されたプロンプトの内容表示
  - [x] 変数部分のハイライト機能
  - [x] プロンプトプレビュー機能
- [x] 右側：変数設定エリア（レベル 5 の準備）
  - [x] 変数名の表示
  - [x] 変数入力フィールドの実装
  - [x] デフォルト値の表示機能
  - [x] 実行ボタンの実装
- [x] プロンプト管理機能の UI
  - [x] 新しいプロンプト追加ボタン
  - [x] プロンプト編集ダイアログ
  - [x] プロンプト削除機能
- [x] インタラクション機能
  - [x] プロンプト選択時の詳細表示切り替え
  - [x] 検索結果のリアルタイム更新
  - [x] キーボードナビゲーション対応

### 5. プロンプト管理機能

- [x] 新規プロンプト作成機能
- [x] プロンプト編集機能（タイトル、内容の変更）
- [x] プロンプト削除機能
- [x] 使用回数カウント機能
- [x] 使用回数順での並び替え機能

### 6. バリデーションとエラーハンドリング

- [x] プロンプトタイトルの重複チェック
- [x] 空のプロンプト入力に対するバリデーション
- [x] データ保存失敗時のエラーハンドリング
- [x] 不正なデータ形式に対するエラーハンドリング

### 7. ユーザビリティの向上

- [ ] プロンプト一覧の検索機能（レベル 2 の準備）
- [ ] プロンプトのプレビュー機能
- [ ] キーボードショートカットの実装
- [ ] 操作結果の通知表示

### 8. テストとデバッグ

- [ ] 基本機能のテストケース作成
- [ ] データ永続化のテスト
- [ ] UI 操作のテスト
- [ ] エラーケースのテスト

## 完了条件

- ユーザーがプロンプトを保存できる
- 保存したプロンプトを編集できる
- プロンプト一覧が使用回数順に表示される
- プロンプトをスクロールして探すことができる
- データが永続化される
